# Backtest Configuration File
# This file defines all configurable parameters for backtesting

# Default backtest configuration
default:
  # Capital and costs
  initial_capital: 100000.0
  commission_rate: 0.0005  # 0.05% per trade
  slippage_rate: 0.0001    # 0.01% slippage
  
  # Position sizing
  max_position_size: 0.25  # 25% of portfolio max per position
  position_sizing_method: "equal_weight"  # equal_weight, kelly, fixed_dollar
  
  # Benchmark and risk-free rate
  benchmark_symbol: "SPY"
  risk_free_rate: 0.02     # 2% annual risk-free rate
  
  # Risk management
  max_drawdown_limit: null     # Stop trading if exceeded (e.g., 0.2 for 20%)
  max_daily_loss: null         # Daily loss limit (e.g., 0.05 for 5%)
  max_positions: null          # Maximum number of positions
  
  # Rebalancing
  rebalance_frequency: null    # daily, weekly, monthly, quarterly
  rebalance_threshold: null    # Rebalance if allocation drift exceeds this

# Alternative configurations for different testing scenarios
configurations:
  
  # Conservative configuration
  conservative:
    initial_capital: 50000.0
    commission_rate: 0.001     # Higher commission for smaller accounts
    slippage_rate: 0.0002      # Higher slippage
    max_position_size: 0.1     # Only 10% per position
    position_sizing_method: "equal_weight"
    benchmark_symbol: "SPY"
    risk_free_rate: 0.02
    max_drawdown_limit: 0.15   # Stop at 15% drawdown
    max_daily_loss: 0.03       # Max 3% daily loss
    max_positions: 5           # Conservative position count
    rebalance_frequency: "monthly"
    rebalance_threshold: 0.05
    
  # Aggressive configuration
  aggressive:
    initial_capital: 250000.0
    commission_rate: 0.0003    # Lower commission for larger accounts
    slippage_rate: 0.00005     # Lower slippage
    max_position_size: 0.4     # Up to 40% per position
    position_sizing_method: "kelly"
    benchmark_symbol: "QQQ"    # Tech-heavy benchmark
    risk_free_rate: 0.02
    max_drawdown_limit: 0.3    # Allow higher drawdown
    max_daily_loss: 0.1        # Allow higher daily loss
    max_positions: 20
    rebalance_frequency: "weekly"
    rebalance_threshold: 0.1
    
  # Day trading configuration
  day_trading:
    initial_capital: 25000.0   # PDT minimum
    commission_rate: 0.0001    # Very low commission
    slippage_rate: 0.00002     # Minimal slippage
    max_position_size: 0.5     # Can go heavy on positions
    position_sizing_method: "fixed_dollar"
    benchmark_symbol: "SPY"
    risk_free_rate: 0.02
    max_drawdown_limit: 0.2
    max_daily_loss: 0.05       # Strict daily loss limit
    max_positions: 3           # Focus on few positions
    rebalance_frequency: "daily"
    rebalance_threshold: 0.02
    
  # Low-cost ETF configuration
  etf_portfolio:
    initial_capital: 10000.0
    commission_rate: 0.0        # Zero commission for ETFs
    slippage_rate: 0.00001      # Minimal slippage for ETFs
    max_position_size: 0.3      # 30% max per ETF
    position_sizing_method: "equal_weight"
    benchmark_symbol: "VTI"     # Total market benchmark
    risk_free_rate: 0.02
    max_drawdown_limit: null    # No limit for buy-and-hold
    max_daily_loss: null
    max_positions: 10
    rebalance_frequency: "quarterly"
    rebalance_threshold: 0.15

# Validation rules
validation:
  initial_capital:
    min: 1000.0
    max: 10000000.0
  commission_rate:
    min: 0.0
    max: 0.1
  slippage_rate:
    min: 0.0
    max: 0.1
  max_position_size:
    min: 0.01
    max: 1.0
  risk_free_rate:
    min: 0.0
    max: 0.2
  max_drawdown_limit:
    min: 0.05
    max: 0.95
  max_daily_loss:
    min: 0.01
    max: 0.5

# Performance calculation settings
performance:
  # Trading days per year for annualization
  trading_days_per_year: 252
  
  # Risk metrics settings
  value_at_risk_confidence: 0.95
  
  # Benchmark comparison settings
  fetch_benchmark_data: true
  benchmark_cache_days: 30

# Output and reporting settings
reporting:
  # Save detailed results
  save_portfolio_history: true
  save_trade_history: true
  save_performance_metrics: true
  
  # Export formats
  export_formats:
    - "pickle"    # Complete data preservation
    - "excel"     # Human-readable format
    
  # Chart generation
  generate_charts: false  # Set to true to auto-generate performance charts
  chart_formats:
    - "png"
    - "pdf" 